const assert = require('node:assert');
const { describe, it } = require('node:test');
const { pricingService } = require('../../src/domain/services/pricing.service');

describe('PricingService', () => {
  it('üí∞ –ü–æ–≤–∏–Ω–µ–Ω –∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—á–∏—Å–ª—é–≤–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É –∫–æ—à–∏–∫–∞ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –∑–Ω–∏–∂–æ–∫ —ñ –ø–æ–¥–∞—Ç–∫—ñ–≤', () => {
    const cart = { items: [{ product: { price: 100 }, quantity: 2 }] }; // –ü—Ä–∏–∫–ª–∞–¥ –∫–æ—à–∏–∫–∞ –∑ –æ–¥–Ω–∏–º —Ç–æ–≤–∞—Ä–æ–º
    // @ts-ignore - –¥–µ—Ç–∞–ª—å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç—É
    const total = pricingService.calculateTotal(cart); // –û–±—á–∏—Å–ª–µ–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–æ—ó —Å—É–º–∏ –∫–æ—à–∏–∫–∞

    // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ –∑–Ω–∏–∂–∫–∏ —Ç–∞ –ø–æ–¥–∞—Ç–∫–∏
    assert.strictEqual(total, 189, '–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ –º–∞—î –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –∑–Ω–∏–∂–∫–∏ —ñ –ø–æ–¥–∞—Ç–∫–∏');
  });

  it('üõçÔ∏è –ü–æ–≤–∏–Ω–µ–Ω –æ–±—á–∏—Å–ª—é–≤–∞—Ç–∏ —Å—É–º—É –¥–ª—è –æ–∫—Ä–µ–º–æ–≥–æ —Ç–æ–≤–∞—Ä—É', () => {
    const item = { product: { price: 50 }, quantity: 2 }; // –ü—Ä–∏–∫–ª–∞–¥ —Ç–æ–≤–∞—Ä—É –∑ —Ü—ñ–Ω–æ—é —ñ –∫—ñ–ª—å–∫—ñ—Å—Ç—é
    // @ts-ignore - –¥–µ—Ç–∞–ª—å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç—É
    const itemTotal = pricingService.calculateItemTotal(item); // –û–±—á–∏—Å–ª–µ–Ω–Ω—è —Å—É–º–∏ –¥–ª—è —Ç–æ–≤–∞—Ä—É

    // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —Å—É–º–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ü—ñ–Ω—ñ —Ç–æ–≤–∞—Ä—É, –ø–æ–º–Ω–æ–∂–µ–Ω—ñ–π –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
    assert.strictEqual(
      itemTotal,
      100,
      '–°—É–º–∞ –¥–ª—è —Ç–æ–≤–∞—Ä—É –ø–æ–≤–∏–Ω–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ —Ü—ñ–Ω—ñ, –ø–æ–º–Ω–æ–∂–µ–Ω—ñ–π –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å'
    );
  });
});
